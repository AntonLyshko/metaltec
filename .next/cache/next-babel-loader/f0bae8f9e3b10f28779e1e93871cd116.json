{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\Next\\\\metaltec\\\\pages\\\\checkout.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Stripe from \"stripe\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { parseCookies, setCookie } from 'nookies';\nimport CheckoutForm from \"../components/checkout-form\";\nconst sum = localStorage.getItem('sum');\nexport const getServerSideProps = async ctx => {\n  const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\n  let paymentIntent;\n  const {\n    paymentIntentId\n  } = await parseCookies(ctx);\n\n  if (paymentIntentId) {\n    paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\n    return {\n      props: {\n        paymentIntent\n      }\n    };\n  }\n\n  paymentIntent = await stripe.paymentIntents.create({\n    amount: sum * 100,\n    currency: 'czk'\n  });\n  setCookie(ctx, 'paymentIntentId', paymentIntent.id);\n  return {\n    props: {\n      paymentIntent\n    }\n  };\n};\n\nconst CheckoutPage = () => {\n  const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\n  return __jsx(\"div\", {\n    className: \"checkout-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, __jsx(Elements, {\n    stripe: stripePromise,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, __jsx(CheckoutForm, {\n    sum: sum,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default CheckoutPage;","map":{"version":3,"sources":["C:/Users/anton/Desktop/Next/metaltec/pages/checkout.js"],"names":["React","Stripe","loadStripe","Elements","parseCookies","setCookie","CheckoutForm","sum","localStorage","getItem","getServerSideProps","ctx","stripe","paymentIntent","paymentIntentId","paymentIntents","retrieve","props","create","amount","currency","id","CheckoutPage","stripePromise"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,SAAxC;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ;AAEA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,GAAP,IAAe;AAC7C,QAAMC,MAAM,GAAG,IAAIX,MAAJ,CAAW,6GAAX,CAAf;AACA,MAAIY,aAAJ;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAsB,MAAMV,YAAY,CAACO,GAAD,CAA9C;;AAEA,MAAIG,eAAJ,EAAqB;AACjBD,IAAAA,aAAa,GAAG,MAAMD,MAAM,CAACG,cAAP,CAAsBC,QAAtB,CAA+BF,eAA/B,CAAtB;AACA,WAAO;AACHG,MAAAA,KAAK,EAAE;AACHJ,QAAAA;AADG;AADJ,KAAP;AAKH;;AAEDA,EAAAA,aAAa,GAAG,MAAMD,MAAM,CAACG,cAAP,CAAsBG,MAAtB,CAA6B;AAC/CC,IAAAA,MAAM,EAAEZ,GAAG,GAAC,GADmC;AAE/Ca,IAAAA,QAAQ,EAAE;AAFqC,GAA7B,CAAtB;AAKAf,EAAAA,SAAS,CAACM,GAAD,EAAM,iBAAN,EAAyBE,aAAa,CAACQ,EAAvC,CAAT;AAEA,SAAO;AACHJ,IAAAA,KAAK,EAAE;AACHJ,MAAAA;AADG;AADJ,GAAP;AAKH,CA1BM;;AA6BP,MAAMS,YAAY,GAAG,MAAM;AACvB,QAAMC,aAAa,GAAGrB,UAAU,CAAC,6GAAD,CAAhC;AAEA,SACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,QAAD;AAAU,IAAA,MAAM,EAAEqB,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,YAAD;AAAc,IAAA,GAAG,EAAEhB,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ;AAQH,CAXD;;AAaA,eAAee,YAAf","sourcesContent":["import React from \"react\";\r\nimport Stripe from \"stripe\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { parseCookies, setCookie } from 'nookies'\r\nimport CheckoutForm from \"../components/checkout-form\";\r\n\r\nconst sum = localStorage.getItem('sum')\r\n\r\nexport const getServerSideProps = async (ctx) => {\r\n    const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\r\n    let paymentIntent;\r\n    const { paymentIntentId } = await parseCookies(ctx);\r\n\r\n    if (paymentIntentId) {\r\n        paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\r\n        return {\r\n            props: {\r\n                paymentIntent\r\n            }\r\n        }\r\n    }\r\n\r\n    paymentIntent = await stripe.paymentIntents.create({\r\n        amount: sum*100,\r\n        currency: 'czk'\r\n    });\r\n\r\n    setCookie(ctx, 'paymentIntentId', paymentIntent.id);\r\n\r\n    return {\r\n        props: {\r\n            paymentIntent\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst CheckoutPage = () => {\r\n    const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\r\n\r\n    return (\r\n        <div className='checkout-page'>\r\n            <Elements stripe={stripePromise}>\r\n                <CheckoutForm sum={sum} />\r\n            </Elements>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CheckoutPage;"]},"metadata":{},"sourceType":"module"}