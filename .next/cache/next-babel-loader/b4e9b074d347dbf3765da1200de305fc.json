{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\Next\\\\metaltec\\\\pages\\\\checkout.js\";\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport CheckoutForm from \"../components/checkout-form\";\nvar sum = localStorage.getItem('sum');\n\nvar CheckoutPage = function CheckoutPage() {\n  var stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\n  return __jsx(\"div\", {\n    className: \"checkout-page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, __jsx(Elements, {\n    stripe: stripePromise,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, __jsx(CheckoutForm, {\n    sum: sum,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  })));\n};\n\n_c = CheckoutPage;\nexport var __N_SSP = true;\nexport default CheckoutPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"sources":["C:/Users/anton/Desktop/Next/metaltec/pages/checkout.js"],"names":["React","loadStripe","Elements","CheckoutForm","sum","localStorage","getItem","CheckoutPage","stripePromise"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AAEA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,IAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ;;AA+BA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB,MAAMC,aAAa,GAAGP,UAAU,CAAC,6GAAD,CAAhC;AAEA,SACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,QAAD;AAAU,IAAA,MAAM,EAAEO,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,YAAD;AAAc,IAAA,GAAG,EAAEJ,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ;AAQH,CAXD;;KAAMG,Y;;AAaN,eAAeA,YAAf","sourcesContent":["import React from \"react\";\r\nimport Stripe from \"stripe\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { parseCookies, setCookie } from 'nookies'\r\nimport CheckoutForm from \"../components/checkout-form\";\r\n\r\nconst sum = localStorage.getItem('sum')\r\n\r\nexport const getServerSideProps = async (ctx) => {\r\n    const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\r\n    let paymentIntent;\r\n    const { paymentIntentId } = await parseCookies(ctx);\r\n\r\n    if (paymentIntentId) {\r\n        paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\r\n        return {\r\n            props: {\r\n                paymentIntent\r\n            }\r\n        }\r\n    }\r\n\r\n    paymentIntent = await stripe.paymentIntents.create({\r\n        amount: sum*100,\r\n        currency: 'czk'\r\n    });\r\n\r\n    setCookie(ctx, 'paymentIntentId', paymentIntent.id);\r\n\r\n    return {\r\n        props: {\r\n            paymentIntent\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst CheckoutPage = () => {\r\n    const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\r\n\r\n    return (\r\n        <div className='checkout-page'>\r\n            <Elements stripe={stripePromise}>\r\n                <CheckoutForm sum={sum} />\r\n            </Elements>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CheckoutPage;"]},"metadata":{},"sourceType":"module"}