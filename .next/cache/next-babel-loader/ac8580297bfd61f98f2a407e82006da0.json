{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\Next\\\\metaltec\\\\pages\\\\checkout.js\";\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { parseCookies } from 'nookies';\nimport CheckoutForm from \"../components/checkout-form\";\n\nvar CheckoutPage = function CheckoutPage(ctx) {\n  var stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\n\n  var _parseCookies = parseCookies(ctx),\n      sum = _parseCookies.sum;\n\n  return __jsx(\"div\", {\n    className: \"checkout-page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, __jsx(Elements, {\n    stripe: stripePromise,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, __jsx(CheckoutForm, {\n    sum: sum,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  })));\n};\n\n_c = CheckoutPage;\nexport var __N_SSP = true;\nexport default CheckoutPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"sources":["C:/Users/anton/Desktop/Next/metaltec/pages/checkout.js"],"names":["React","loadStripe","Elements","parseCookies","CheckoutForm","CheckoutPage","ctx","stripePromise","sum"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,YAAT,QAAwC,SAAxC;AACA,OAAOC,YAAP,MAAyB,6BAAzB;;AAiCA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAS;AAC1B,MAAMC,aAAa,GAAGN,UAAU,CAAC,6GAAD,CAAhC;;AAD0B,sBAEVE,YAAY,CAACG,GAAD,CAFF;AAAA,MAElBE,GAFkB,iBAElBA,GAFkB;;AAG1B,SACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,QAAD;AAAU,IAAA,MAAM,EAAED,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,YAAD;AAAc,IAAA,GAAG,EAAEC,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ;AAQH,CAXD;;KAAMH,Y;;AAaN,eAAeA,YAAf","sourcesContent":["import React from \"react\";\r\nimport Stripe from \"stripe\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { parseCookies, setCookie } from 'nookies'\r\nimport CheckoutForm from \"../components/checkout-form\";\r\n\r\n\r\n\r\nexport const getServerSideProps = async (ctx) => {\r\n    const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\r\n    let paymentIntent;\r\n    const { paymentIntentId, sum } = await parseCookies(ctx);\r\n\r\n    if (paymentIntentId) {\r\n        paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\r\n        return {\r\n            props: {\r\n                paymentIntent\r\n            }\r\n        }\r\n    }\r\n    let sumCZK = sum*100;\r\n    paymentIntent = await stripe.paymentIntents.create({\r\n        amount: sumCZK,\r\n        currency: 'czk'\r\n    });\r\n\r\n    setCookie(ctx, 'paymentIntentId', paymentIntent.id);\r\n\r\n    return {\r\n        props: {\r\n            paymentIntent\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst CheckoutPage = (ctx) => {\r\n    const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\r\n    const { sum } = parseCookies(ctx);\r\n    return (\r\n        <div className='checkout-page'>\r\n            <Elements stripe={stripePromise}>\r\n                <CheckoutForm sum={sum} />\r\n            </Elements>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CheckoutPage;"]},"metadata":{},"sourceType":"module"}