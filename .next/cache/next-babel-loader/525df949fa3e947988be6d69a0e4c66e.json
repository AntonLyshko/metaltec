{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from 'next/link';\nimport $ from 'jquery';\nimport React, { useEffect, useState, Fragment } from 'react';\n\nvar CartNav = function CartNav(props) {\n  var _useState = useState({\n    data: [],\n    sum: '(ãƒ„)'\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var getStorage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var cartItems, dataStorage, sum;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return localStorage.getItem('products');\n\n            case 2:\n              cartItems = _context.sent;\n              _context.next = 5;\n              return JSON.parse(cartItems);\n\n            case 5:\n              dataStorage = _context.sent;\n\n              if (dataStorage) {\n                if (state.data.length != dataStorage.length) {\n                  sum = 0;\n                  dataStorage.forEach(function (el) {\n                    sum += parseInt(el.price, 10) * el.amount;\n                  });\n                  setState(_objectSpread(_objectSpread({}, state), {}, {\n                    data: dataStorage,\n                    sum: sum\n                  }));\n                }\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getStorage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getStorage();\n  });\n\n  var deleteProduct = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return props.deleteProduct(id);\n\n            case 2:\n              getStorage();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function deleteProduct(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var cartOpen = function cartOpen(num) {\n    $('.dropdown-' + num).show();\n    getStorage();\n  };\n\n  var cartClose = function cartClose() {\n    $('.w-dropdown-list').hide();\n  };\n\n  return __jsx(\"div\", {\n    className: \"af-class-cart-container\"\n  }, __jsx(\"div\", {\n    \"data-hover\": 1,\n    \"data-delay\": 0,\n    className: \"af-class-dropdown w-dropdown\"\n  }, __jsx(Link, {\n    href: \"/cart\"\n  }, __jsx(\"div\", {\n    onMouseEnter: function onMouseEnter() {\n      return cartOpen(4);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return cartClose();\n    },\n    className: \"af-class-dropdown-toggle af-class-cart-toggle w-dropdown-toggle\"\n  }, __jsx(\"img\", {\n    src: require(\"../../images/shopping-cart-empty-side-view.png\"),\n    loading: \"lazy\",\n    alt: true,\n    className: \"af-class-image-3\"\n  }))), __jsx(\"nav\", {\n    onMouseEnter: function onMouseEnter() {\n      return cartOpen(4);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return cartClose();\n    },\n    className: \"af-class-navigation-dropdown af-class-dropdown-cart w-dropdown-list dropdown-4\"\n  }, __jsx(\"div\", {\n    className: \"af-class-dropdown-pointer\"\n  }, __jsx(\"div\", {\n    className: \"af-class-dropdown-wrapper\"\n  }, __jsx(Fragment, null, state.data.length ? __jsx(Fragment, null, state.data.map(function (item) {\n    return __jsx(\"a\", {\n      href: \"#\",\n      className: \"af-class-dropdown-link af-class-dropdown-cart-item w-inline-block\"\n    }, __jsx(\"div\", {\n      className: \"af-class-dropdown-cart-item\"\n    }, __jsx(\"div\", {\n      className: \"af-class-dropdown-cart-amount\"\n    }, __jsx(\"div\", null, \"x\", item.amount)), __jsx(\"div\", {\n      className: \"af-class-dropdown-cart-img\"\n    }, __jsx(\"img\", {\n      src: \"http://localhost:1337\".concat(item.image),\n      loading: \"lazy\",\n      sizes: \"100vw\",\n      s: true,\n      alt: true,\n      className: \"af-class-image-7\"\n    })), __jsx(\"div\", {\n      className: \"af-class-dropdown-cart-desc\"\n    }, __jsx(\"h1\", {\n      className: \"af-class-dropdown-cart-title\"\n    }, item.name), __jsx(\"div\", {\n      className: \"af-class-dropdown-cart-cost\"\n    }, item.price, \" K\\u010D\")), __jsx(\"div\", {\n      onClick: function onClick() {\n        return deleteProduct(item.id);\n      },\n      className: \"af-class-dropdown-item-control\"\n    }, __jsx(\"img\", {\n      src: require(\"../../images/cross.png\"),\n      loading: \"lazy\",\n      alt: true,\n      className: \"af-class-image-8\"\n    }))));\n  })) : __jsx(Fragment, null, __jsx(\"div\", {\n    className: \"prazdni-kosik\"\n  }, \"Ko\\u0161\\xEDk pr\\xE1zdn\\xFD\"))), __jsx(\"div\", {\n    className: \"af-class-dropdown-cart-control\"\n  }, __jsx(\"div\", {\n    className: \"af-class-sum-container\"\n  }, __jsx(\"h5\", {\n    className: \"af-class-sum-title\"\n  }, \"Sou\\u010Det\"), __jsx(\"h5\", {\n    className: \"af-class-sum-title\"\n  }, state.sum, \" K\\u010D\")), __jsx(\"div\", {\n    className: \"af-class-dropdown-cart-btn-container\"\n  }, __jsx(Link, {\n    href: \"/cart\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"af-class-button af-class-default-button af-class-big-default af-class-dropdown-cart-btn w-button\"\n  }, \"K pokladn\\u011B\")), __jsx(Link, {\n    href: \"/cart\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"af-class-button af-class-default-button af-class-big-default af-class-dropdown-cart-btn af-class-dropdown-cart-btn-2 w-button\"\n  }, \"Do ko\\u0161\\xEDku\"))))), __jsx(\"div\", {\n    className: \"af-class-pointer af-class-cart-pointer\"\n  })))));\n};\n\nexport default CartNav;","map":null,"metadata":{},"sourceType":"module"}