{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\Next\\\\metaltec\\\\pages\\\\checkout.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Stripe from \"stripe\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { parseCookies, setCookie } from 'nookies';\nimport CheckoutForm from \"../components/checkout-form\";\nexport const getServerSideProps = async ctx => {\n  const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\n  let paymentIntent;\n  const {\n    paymentIntentId\n  } = await parseCookies(ctx);\n\n  if (paymentIntentId) {\n    paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\n    return {\n      props: {\n        paymentIntent\n      }\n    };\n  }\n\n  paymentIntent = await stripe.paymentIntents.create({\n    amount: 1500,\n    currency: 'czk'\n  });\n  setCookie(ctx, 'paymentIntentId', paymentIntent.id);\n  return {\n    props: {\n      paymentIntent\n    }\n  };\n};\n\nconst CheckoutPage = () => {\n  const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    sum: 0\n  });\n\n  const getSum = async () => {\n    let cartItems = await localStorage.getItem('products');\n    let dataStorage = await JSON.parse(cartItems);\n    let sum = 0;\n    await dataStorage.forEach(el => {\n      sum += parseInt(el.price, 10) * el.amount;\n    });\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      sum: sum\n    }));\n  };\n\n  return __jsx(\"div\", {\n    className: \"checkout-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(Elements, {\n    stripe: stripePromise,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, __jsx(CheckoutForm, {\n    sum: state.sum,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default CheckoutPage;","map":{"version":3,"sources":["C:/Users/anton/Desktop/Next/metaltec/pages/checkout.js"],"names":["React","useEffect","useState","Stripe","loadStripe","Elements","parseCookies","setCookie","CheckoutForm","getServerSideProps","ctx","stripe","paymentIntent","paymentIntentId","paymentIntents","retrieve","props","create","amount","currency","id","CheckoutPage","stripePromise","state","setState","sum","getSum","cartItems","localStorage","getItem","dataStorage","JSON","parse","forEach","el","parseInt","price"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,SAAxC;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,GAAP,IAAe;AAC7C,QAAMC,MAAM,GAAG,IAAIR,MAAJ,CAAW,6GAAX,CAAf;AACA,MAAIS,aAAJ;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAsB,MAAMP,YAAY,CAACI,GAAD,CAA9C;;AAEA,MAAIG,eAAJ,EAAqB;AACjBD,IAAAA,aAAa,GAAG,MAAMD,MAAM,CAACG,cAAP,CAAsBC,QAAtB,CAA+BF,eAA/B,CAAtB;AACA,WAAO;AACHG,MAAAA,KAAK,EAAE;AACHJ,QAAAA;AADG;AADJ,KAAP;AAKH;;AAEDA,EAAAA,aAAa,GAAG,MAAMD,MAAM,CAACG,cAAP,CAAsBG,MAAtB,CAA6B;AAC/CC,IAAAA,MAAM,EAAE,IADuC;AAE/CC,IAAAA,QAAQ,EAAE;AAFqC,GAA7B,CAAtB;AAKAZ,EAAAA,SAAS,CAACG,GAAD,EAAM,iBAAN,EAAyBE,aAAa,CAACQ,EAAvC,CAAT;AAEA,SAAO;AACHJ,IAAAA,KAAK,EAAE;AACHJ,MAAAA;AADG;AADJ,GAAP;AAKH,CA1BM;;AA6BP,MAAMS,YAAY,GAAG,MAAM;AACvB,QAAMC,aAAa,GAAGlB,UAAU,CAAC,6GAAD,CAAhC;AACA,QAAM;AAAA,OAACmB,KAAD;AAAA,OAAQC;AAAR,MAAoBtB,QAAQ,CAAC;AAC/BuB,IAAAA,GAAG,EAAE;AAD0B,GAAD,CAAlC;;AAGA,QAAMC,MAAM,GAAG,YAAW;AACtB,QAAIC,SAAS,GAAG,MAAMC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAtB;AACA,QAAIC,WAAW,GAAG,MAAMC,IAAI,CAACC,KAAL,CAAWL,SAAX,CAAxB;AACA,QAAIF,GAAG,GAAG,CAAV;AACA,UAAMK,WAAW,CAACG,OAAZ,CAAoBC,EAAE,IAAI;AAC9BT,MAAAA,GAAG,IAAIU,QAAQ,CAACD,EAAE,CAACE,KAAJ,EAAW,EAAX,CAAR,GAAyBF,EAAE,CAAChB,MAAnC;AACD,KAFK,CAAN;AAGAM,IAAAA,QAAQ,iCAAMD,KAAN;AAAaE,MAAAA,GAAG,EAAEA;AAAlB,OAAR;AACH,GARD;;AAUA,SACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,QAAD;AAAU,IAAA,MAAM,EAAEH,aAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,YAAD;AAAc,IAAA,GAAG,EAAEC,KAAK,CAACE,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ;AAQH,CAvBD;;AAyBA,eAAeJ,YAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Stripe from \"stripe\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { parseCookies, setCookie } from 'nookies'\r\nimport CheckoutForm from \"../components/checkout-form\";\r\n\r\nexport const getServerSideProps = async (ctx) => {\r\n    const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\r\n    let paymentIntent;\r\n    const { paymentIntentId } = await parseCookies(ctx);\r\n\r\n    if (paymentIntentId) {\r\n        paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\r\n        return {\r\n            props: {\r\n                paymentIntent\r\n            }\r\n        }\r\n    }\r\n\r\n    paymentIntent = await stripe.paymentIntents.create({\r\n        amount: 1500,\r\n        currency: 'czk'\r\n    });\r\n\r\n    setCookie(ctx, 'paymentIntentId', paymentIntent.id);\r\n\r\n    return {\r\n        props: {\r\n            paymentIntent\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst CheckoutPage = () => {\r\n    const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\r\n    const [state, setState] = useState({\r\n        sum: 0\r\n      });\r\n    const getSum = async () =>{\r\n        let cartItems = await localStorage.getItem('products');\r\n        let dataStorage = await JSON.parse(cartItems);\r\n        let sum = 0;\r\n        await dataStorage.forEach(el => {\r\n          sum += parseInt(el.price, 10) * el.amount;\r\n        });\r\n        setState({ ...state, sum: sum })\r\n    }\r\n\r\n    return (\r\n        <div className='checkout-page'>\r\n            <Elements stripe={stripePromise}>\r\n                <CheckoutForm sum={state.sum} />\r\n            </Elements>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CheckoutPage;"]},"metadata":{},"sourceType":"module"}