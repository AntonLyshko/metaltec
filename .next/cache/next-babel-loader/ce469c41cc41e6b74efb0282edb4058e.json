{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport Stripe from \"stripe\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { parseCookies, setCookie } from 'nookies';\nimport CheckoutForm from \"../components/checkout-form\";\nexport const getServerSideProps = async ctx => {\n  const stripe = new Stripe('sk_test_51HfCQbKalev6rGvBBX6I9TSerXOC1w0RKBoeEwE1JEgtyb4KhIB3DiJ6F4o4ahgsI8SHEjXDARqSOXdqfQoNXzUa00j0b8kC5j');\n  let paymentIntent;\n  const {\n    paymentIntentId,\n    sum\n  } = await parseCookies(ctx);\n\n  if (paymentIntentId) {\n    paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);\n    return {\n      props: {\n        paymentIntent\n      }\n    };\n  }\n\n  let sumCZK = sum * 100;\n  paymentIntent = await stripe.paymentIntents.create({\n    amount: sumCZK,\n    currency: 'czk'\n  });\n  setCookie(ctx, 'paymentIntentId', paymentIntent.id);\n  return {\n    props: {\n      paymentIntent\n    }\n  };\n};\n\nconst CheckoutPage = ctx => {\n  const stripePromise = loadStripe(\"pk_test_51HfCQbKalev6rGvBMHNaOtgfWfMUKJzkhs7TfmcQ5fjp5XyoeG2z97erNGBrtWPLnv3QmN1ImHhkNzX0fgX9lLKQ00ogCnUjLE\");\n  const {\n    sum\n  } = parseCookies(ctx);\n  return __jsx(\"div\", {\n    className: \"checkout-page\"\n  }, __jsx(Elements, {\n    stripe: stripePromise\n  }, __jsx(CheckoutForm, {\n    sum: sum\n  })));\n};\n\nexport default CheckoutPage;","map":null,"metadata":{},"sourceType":"module"}